swagger: "2.0"
info:
  version: "0.0.1"
  title: LOC-DB Central Component
host: localhost
basePath: /
tags:
  - name: User
    description: Services related to user management.
  - name: BibliographicResource
    description: Services related to bibliographic resources.
  - name: Scan
    description: Services related to scans.
  - name: BibliographicEntry
    description: Services related to bibliographic entries.
  - name: Utils
    description: Services that are not directly related to the application.
schemes:
  #- http
  - https
consumes:
  - application/json
  - multipart/form-data
produces:
  - application/json
  - image/png
  - application/pdf
securityDefinitions:
  basicAuth:
    type: basic
  login:
    type: basic

# To apply Basic auth to the whole API:
#security:
#  - basicAuth: []


paths:
  /addFeed:
    x-swagger-router-controller: user
    post:
      tags: [User]
      description: Adds an RSS or Atom Feed the users feed list
      operationId: addFeed
      parameters:
        - name: feed
          in: body
          description: The feed object consisting of name (may be user specified) and URL of the feed
          required: true
          schema:
              $ref: "#/definitions/Feed"
      responses:
        "200":
          description: Success
          schema:
              $ref: "#/definitions/User"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /fetchFeeds:
    x-swagger-router-controller: user
    get:
      tags: [User]
      description: Fetches all the feeds entries a user subscribed to
      operationId: fetchFeeds
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              type: array
              items:
                $ref: "#/definitions/FeedEntry"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /deleteFeed/{id}:
    x-swagger-router-controller: user
    delete:
      tags: [User]
      description: Deletes an RSS or Atom Feed from the users feed list
      operationId: deleteFeed
      parameters:
        - name: id
          in: path
          description: The id of the feed to be deleted from the users feed list
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
              $ref: "#/definitions/User"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /login:
    x-swagger-router-controller: user
    post:
      tags: [User]
      description: Login service
      operationId: login
      security:
        - login: []
      parameters:
        - name: user
          in: body
          description: The user object consisting of username and password
          required: true
          schema:
              $ref: "#/definitions/User"
      responses:
        "200":
          description: Success
          schema:
              $ref: "#/definitions/User"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /signup:
    x-swagger-router-controller: user
    post:
      tags: [User]
      description: Signup service
      operationId: signup
      parameters:
        - name: user
          in: body
          description: The user object consisting of username and password
          required: true
          schema:
              $ref: "#/definitions/User"
      responses:
        "200":
          description: Success
          schema:
              $ref: "#/definitions/User"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /logout:
    x-swagger-router-controller: user
    get:
      tags: [User]
      description: Logout service
      operationId: logout
      responses:
        "200":
          description: Success
          schema:
              $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /bibliographicResources:
    x-swagger-router-controller: bibliographicResource
    get:
      tags: [BibliographicResource]
      description: Returns a list of bibliographic resources
      operationId: list
      responses:
        "200":
          description: Success
          schema:
            type: array
            items: 
              $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    delete:
      tags: [BibliographicResource]
      description: Deletes all (!) bibliographic resources (may be removed in a later stage)
      operationId: deleteAll
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    post:
      tags: [BibliographicResource]
      description: Saves a new bibliographic resource into the database
      operationId: save
      parameters:
        - name: bibliographicResource
          in: body
          description: A bibliographic resource to be saved in the database
          required: true
          schema:
            $ref: "#/definitions/BibliographicResource"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /setValid:
    x-swagger-router-controller: bibliographicResource
    get:
      tags: [BibliographicResource]
      description: Sets a bibliographic resource to VALID, i.e. "completely linked",
       given it's internal identifier. The system internally sets all bibliographic entries
       of the bibliographic resources to OBSOLETE that are not linked and therefore not valid.
       We do this in order to deal with duplicate reference extractions.
      operationId: setValid
      parameters:
        - name: id
          in: query
          description: The internal identifier of the resource
          required: true
          type: string
          pattern: '^[a-f\d]{24}$'
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"


  /saveResource:
    x-swagger-router-controller: scan
    post:
      tags: [Scan]
      description: Saves a bibliographic Resource given it's identifier and resourceType as well as additional information
      operationId: saveResource
      parameters:
        - name: identifierScheme
          in: formData
          description: The scheme of the identifier of the resource
          required: true
          type: string
          enum: [SWB_PPN, ZDB_PPN, DOI, OLC_PPN]
        - name: identifierLiteralValue
          in: formData
          description: The literal value of the identifier of the resource
          required: true
          type: string
        - name: firstPage
          in: formData
          description: The number of the first page of the resource (for journal articles, book chapters etc).
          required: false
          type: number
        - name: lastPage
          in: formData
          description: The number of the last page of the resource.
          required: false
          type: number
        - name: textualPdf
          in: formData
          description: Whether the references file (if given) is a PDF with textual content
          required: false
          type: boolean
        - name: binaryFile
          in: formData
          description: The reference page (binary file)
          required: false
          type: file
        - name: stringFile
          in: formData
          description: The reference page (string), e.g. the html code of an online reference page
          required: false
          type: string
        - name: embodimentType
          in: formData
          description: The embodiment type (PRINT or DIGITAL) of the resource
          required: false
          type: string
          enum: [PRINT, DIGITAL]
        - name: resourceType
          in: formData
          description: The type of the resource.
          required: true
          type: string
          enum: [BOOK, BOOK_CHAPTER, BOOK_PART, BOOK_SECTION, BOOK_SERIES, BOOK_SET,
           BOOK_TRACK, COMPONENT, DATASET, DISSERTATION, EDITED_BOOK, JOURNAL_ARTICLE, JOURNAL_ISSUE, JOURNAL_VOLUME,
            MONOGRAPH, JOURNAL, PROCEEDINGS_ARTICLE, PROCEEDINGS, REFERENCE_BOOK, REFERENCE_ENTRY, REPORT_SERIES, REPORT, STANDARD_SERIES, STANDARD]
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /bibliographicEntries:
    x-swagger-router-controller: bibliographicEntry
    post:
      tags: [BibliographicEntry]
      description: creates a bibliographic entry for the given bibliographic resource
      operationId: create
      parameters:
        - name: bibliographicResourceId
          in: query
          description: The _id of the bibliographic resource to which the new bibliographic entry should be appended
          required: true
          type: string
        - name: bibliographicEntry
          in: body
          description: A bibliographic entry which should be saved
          required: true
          schema:
            $ref: "#/definitions/BibliographicEntry"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicEntry"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /bibliographicEntries/{id}:
    x-swagger-router-controller: bibliographicEntry
    put:
      tags: [BibliographicEntry]
      description: Updates a given bibliographic entry by id. Note that the status needs to be changed to VALID if this service is called after validation by a librarian. Properties that are not given with the update data are preserved.
      operationId: update
      parameters:
        - name: id
          in: path
          description: The _id of the bibliographic entry to be updated.
          required: true
          type: string
        - name: bibliographicEntry
          in: body
          description: A bibliographic entry with new values to be updated.
          required: true
          schema:
            $ref: "#/definitions/BibliographicEntry"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicEntry"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    delete:
      tags: [BibliographicEntry]
      description: Deletes a given bibliographic entry by id.
      operationId: remove
      parameters:
        - name: id
          in: path
          description: The _id of the bibliographic entry to be deleted.
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicEntry"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /addTargetBibliographicResource:
    x-swagger-router-controller: bibliographicEntry
    get:
      tags: [BibliographicEntry]
      description: |
        Given the _id of a bibliographic entry and the _id of a target, i.e., a cited, bibliographic resource,
        this service takes care of setting all related properties in a consistent way. More precisely, the following three things happen:
        1) The 'status' of the bibliographic entry will be changed to VALID
        2) The 'references' property of the bibliographic entry will be set to the _id of the target bibliographic resource
        3) The 'cites' property of the parent resource of the entry will be extended with the _id of the target bibliographic reource
      operationId: addTargetBibliographicResource
      parameters:
        - name: bibliographicEntryId
          in: query
          description: The _id of the subject bibliographic entry that should point to the target bibliographic resource
          required: true
          type: string
        - name: bibliographicResourceId
          in: query
          description: The _id of the target bibliographic resource which the bibliographic entry should point to
          required: true
          type: string
      responses:
        "200":
          description: Success; In case the operation suceeds, the updated source bibliographic resource including the respective bibliographic entry will be returned
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /removeTargetBibliographicResource:
    x-swagger-router-controller: bibliographicEntry
    get:
      tags: [BibliographicEntry]
      description: |
        Given the _id of a bibliographic entry this service clears all properties related to a potential target resource in a consistent way. More precisely, the following three things happen:
        1) The 'references' property of the bibliographic entry will be cleared
        2) The _id of the old target resource will be removed from teh 'cites' property of the parent resource of the entry
        3) The 'status' of the bibliographic entry will be changed to OCR_PROCESSED --> Is this always ok?
        Note that the old target bibliographic resource will not be deleted.
      operationId: removeTargetBibliographicResource
      parameters:
        - name: bibliographicEntryId
          in: query
          description: The _id of the subject bibliographic entry that should point to the target bibliographic resource
          required: true
          type: string
      responses:
        "200":
          description: Success; In case the operation suceeds, the updated source bibliographic resource including the respective bibliographic entry will be returned
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /bibliographicResources/{id}:
    x-swagger-router-controller: bibliographicResource
    get:
      tags: [BibliographicResource]
      description: Returns a single bibliographic resource by id
      operationId: get
      parameters:
        - name: id
          in: path
          description: The internal identifier of the bibliographic resource
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    delete:
      tags: [BibliographicResource]
      description: Deletes a single bibliographic resource by id
      operationId: deleteSingle
      parameters:
        - name: id
          in: path
          description: The internal identifier of the bibliographic resource
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    put:
      tags: [BibliographicResource]
      description: Updates an existing bibliographic resource
      operationId: update
      parameters:
        - name: id
          in: path
          description: The _id of the bibliographic resource to be updated.
          required: true
          type: string
        - name: bibliographicResource
          in: body
          description: A bibliographic resource to be updated
          required: true
          schema:
            $ref: "#/definitions/BibliographicResource"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
            
  /getToDo:
    x-swagger-router-controller: scan
    get:
      tags: [Scan]
      description: Retrieves the BRs including their associated parts and scans that are either not processed or processed by the OCR-component or retrieved from external.
      operationId: getToDo
      parameters:
        - name: status
          in: query
          description: The list of status for which the ToDo-list shall be retrieved
          required: true
          type: array
          items:
            type: string
            enum:
              - NOT_OCR_PROCESSED
              - OCR_PROCESSED
              - EXTERNAL
              - OCR_PROCESSING
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              $ref: "#/definitions/ToDo"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
            
  /scans/{id}:
    x-swagger-router-controller: scan
    get:
      tags: [Scan]
      description: Returns a single scan by id
      operationId: get
      parameters:
        - name: id
          in: path
          description: The internal identifier of the scan
          required: true
          type: string
      responses:
        200:
          description: Returns Scan
          schema: 
            type: file
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    delete:
      tags: [Scan]
      description: Deletes a single scan by id
      operationId: remove
      parameters:
        - name: id
          in: path
          description: The internal identifier of the scan
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /triggerOcrProcessing:
    x-swagger-router-controller: scan
    get:
      tags: [Scan]
      description: Send a processing request to the OCR component.
      parameters:
        - name: id
          in: query
          description: The unique id of the scan which should be send to the OCR component
          required: true
          type: string
      operationId: triggerOcrProcessing
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /correctReferencePosition:
    x-swagger-router-controller: scan
    get:
      tags: [Scan]
      description: Send a processing request to the reference extraction component for a single reference with human-corrected bounding box position
      parameters:
        - name: scanId
          in: query
          description: The unique id of the scan which should be send to the reference extraction component
          required: true
          type: string
        - name: coordinates
          in: query
          description: The new coordinates of the bounding box separated by single space, i.e. format x1 y1 x2 y2
          required: true
          type: string
        - name: bibliographicEntryId
          in: query
          description: The id of the bibliographic entry that should be set to obsolete
          required: false
          type: string
      operationId: correctReferencePosition
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/BibliographicEntry"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  
  /getToDoBibliographicEntries:
    x-swagger-router-controller: bibliographicEntry
    get:
      tags: [BibliographicEntry]
      description: Retrieves the BEs that are not processed by a librarian yet.
      operationId: getToDoBibliographicEntries
      parameters:
        - name: scanId
          in: query
          description: The Id of the Scan for which the BEs shall be retrieved
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              $ref: "#/definitions/BibliographicEntry"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getInternalSuggestionsByQueryString:
    x-swagger-router-controller: bibliographicEntry
    get:
      tags: [BibliographicEntry]
      description: Retrieves internal br suggestions for a given query string related to a bibliographic entry.
      operationId: getInternalSuggestionsByQueryString
      parameters:
        - name: query
          in: query
          description: The query string for which the suggestions shall be retrieved
          required: true
          type: string
        - name: k
          in: query
          description: Top k results that shall be retrieved (the default value is 10)
          required: false
          type: number
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              type: array
              items:
                $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getExternalSuggestionsByQueryString:
    x-swagger-router-controller: bibliographicEntry
    get:
      tags: [BibliographicEntry]
      description: Retrieves external br suggestions for a given query string related to a bibliographic entry.
      operationId: getExternalSuggestionsByQueryString
      parameters:
        - name: query
          in: query
          description: The query string for which the suggestions shall be retrieved
          required: true
          type: string
        - name: k
          in: query
          description: Top k results that shall be retrieved (the default value is 10)
          required: false
          type: number
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              type: array
              items:
                $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /log:
    x-swagger-router-controller: utils
    post:
      tags: [Utils]
      description: Logs a json object.
      operationId: log
      parameters:
        - name: logObject
          in: body
          description: The object to log.
          required: false
          schema:
            $ref: "#/definitions/LogRequest"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /loadBibliographicResources:
    x-swagger-router-controller: utils
    post:
      tags: [Utils]
      description: Loads bibliographic resources into the database given a JSON file
      operationId: loadBibliographicResources
      parameters:
        - name: file
          in: formData
          description: A textual file with bibliographic resources to store in the database (has to be json)
          required: true
          type: file
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getK10Plus:
    x-swagger-router-controller: utils
    get:
      tags: [Utils]
      description: Gets parsed marc from k10+zentral (needed for debugging)
      operationId: getK10Plus
      parameters:
        - name: query
          in: query
          description: The query string
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getCrossref:
    x-swagger-router-controller: utils
    get:
      tags: [Utils]
      description: Gets parsed data from Crossref (needed for debugging)
      operationId: getCrossref
      parameters:
        - name: query
          in: query
          description: The query string
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getSWB:
    x-swagger-router-controller: utils
    get:
      tags: [Utils]
      description: Gets parsed marc from SWB (needed for debugging)
      operationId: getSWB
      parameters:
        - name: query
          in: query
          description: The query string
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getGVI:
    x-swagger-router-controller: utils
    get:
      tags: [Utils]
      description: Gets parsed data from GVI (needed for debugging)
      operationId: getGVI
      parameters:
        - name: query
          in: query
          description: The query string
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /stats:
    x-swagger-router-controller: utils
    get:
      tags: [Utils]
      description: Returns a bunch of statistics reflecting the current status of the system
      operationId: stats
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/SuccessResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /bibliographicResourcesOC:
    x-swagger-router-controller: bibliographicResource
    get:
      tags: [BibliographicResource]
      description: Returns a list of bibliographic resources in OC format
      operationId: listOC
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              $ref: "#/definitions/BibliographicResourceOpenCitations"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /getPrecalculatedSuggestions/{id}:
    x-swagger-router-controller: bibliographicEntry
    get:
      tags: [BibliographicEntry]
      description: Retrieves external br suggestions (precalculated) for a given bibliographic entry.
      operationId: getPrecalculatedSuggestions
      parameters:
        - name: id
          in: path
          description: The id of the be for which the precalculated suggestions shall be retrieved
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              type: array
              items:
                $ref: "#/definitions/BibliographicResource"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /swagger:
    x-swagger-pipe: swagger_raw



definitions:
  BibliographicResourceOpenCitations:
    properties:
      _id:
        type: string
        pattern: '^[a-f\d]{24}$'
      identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      type:
        type: string
      title:
        type: string
      subtitle:
        type: string
      edition:
        type: string
      number:
        type: string
      contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      publicationDate:
        type: string
        format: date
      #status:
      #  type: string
      cites:
        type: array
        items:
          type: string
          pattern: '^[a-f\d]{24}$'
      partOf:
        type: string
        pattern: '^$|^[a-f\d]{24}$'
      parts:
        type: array
        items:
          $ref: "#/definitions/BibliographicEntry"
      embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      #relatedDocument:
      #  type: any

  BibliographicResource:
    required:
      - type
    properties:
      _id:
        type: string
        pattern: '^[a-f\d]{24}$'
      journal_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      journalVolume_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      journalIssue_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      journalArticle_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      monograph_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      editedBook_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookSeries_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookSet_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookChapter_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookSection_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookPart_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookTrack_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      component_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      dissertation_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      proceedingsArticle_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      proceedings_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      dataset_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      report_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      reportSeries_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      book_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      referenceBook_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      referenceEntry_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      standard_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      standardSeries_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      type:
        type: string
      journal_title:
        type: string
      journalVolume_title:
        type: string
      journalIssue_title:
        type: string
      journalArticle_title:
        type: string
      monograph_title:
        type: string
      editedBook_title:
        type: string
      bookSeries_title:
        type: string
      bookSet_title:
        type: string
      bookChapter_title:
        type: string
      bookSection_title:
        type: string
      bookPart_title:
        type: string
      bookTrack_title:
        type: string
      component_title:
        type: string
      report_title:
        type: string
      proceedingsArticle_title:
        type: string
      proceedings_title:
        type: string
      dataset_title:
        type: string
      reportSeries_title:
        type: string
      book_title:
        type: string
      referenceBook_title:
        type: string
      referenceEntry_title:
        type: string
      standard_title:
        type: string
      standardSeries_title:
        type: string
      editedBook_subtitle:
        type: string
      report_subtitle:
        type: string
      dissertation_subtitle:
        type: string
      proceedingsArticle_subtitle:
        type: string
      standard_subtitle:
        type: string
      standardSeries_subtitle:
        type: string
      journal_subtitle:
        type: string
      journalArticle_subtitle:
        type: string
      bookSeries_subtitle:
        type: string
      monograph_subtitle:
        type: string
      bookSet_subtitle:
        type: string
      bookPart_subtitle:
        type: string
      bookChapter_subtitle:
        type: string
      bookSection_subtitle:
        type: string
      bookTrack_subtitle:
        type: string
      component_subtitle:
        type: string
      proceedings_subtitle:
        type: string
      dataset_subtitle:
        type: string
      reportSeries_subtitle:
        type: string
      book_subtitle:
        type: string
      referenceBook_subtitle:
        type: string
      referenceEntry_subtitle:
        type: string
      monograph_edition:
        type: string
      editedBook_edition:
        type: string
      dissertation_edition:
        type: string
      proceedings_edition:
        type: string
      report_edition:
        type: string
      book_edition:
        type: string
      referenceBook_edition:
        type: string
      standard_edition:
        type: string
      journalVolume_number:
        type: string
      journalIssue_number:
        type: string
      journalArticle_number:
        type: string
      bookPart_number:
        type: string
      monograph_number:
        type: string
      editedBook_number:
        type: string
      component_number:
        type: string
      bookSet_number:
        type: string
      bookChapter_number:
        type: string
      bookSection_number:
        type: string
      bookTrack_number:
        type: string
      proceedings_number:
        type: string
      report_number:
        type: string
      book_number:
        type: string
      standard_number:
        type: string
      referenceBook_number:
        type: string
      referenceEntry_number:
        type: string
      journal_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      report_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalVolume_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalIssue_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalArticle_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      monograph_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      editedBook_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookSeries_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      proceedingsArticle_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookSet_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookChapter_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      dataset_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookTrack_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      component_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      dissertation_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      proceedings_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      reportSeries_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      book_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      referenceBook_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      referenceEntry_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      standard_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      standardSeries_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalArticle_publicationDate:
        type: string
        format: date
      journalIssue_publicationDate:
        type: string
        format: date
      journalVolume_publicationDate:
        type: string
        format: date
      journal_publicationDate:
        type: string
        format: date
      monograph_publicationDate:
        type: string
        format: date
      report_publicationDate:
        type: string
        format: date
      reportSeries_publicationDate:
        type: string
        format: date
      bookChapter_publicationDate:
        type: string
        format: date
      bookSeries_publicationDate:
        type: string
        format: date
      bookSet_publicationDate:
        type: string
        format: date
      editedBook_publicationDate:
        type: string
        format: date
      dissertation_publicationDate:
        type: string
        format: date
      proceedingsArticle_publicationDate:
        type: string
        format: date
      dataset_publicationDate:
        type: string
        format: date
      proceedings_publicationDate:
        type: string
        format: date
      book_publicationDate:
        type: string
        format: date
      referenceBook_publicationDate:
        type: string
        format: date
      referenceEntry_publicationDate:
        type: string
        format: date
      standard_publicationDate:
        type: string
        format: date
      standardSeries_publicationDate:
        type: string
        format: date
      bookPart_publicationDate:
        type: string
        format: date
      bookSection_publicationDate:
        type: string
        format: date
      bookTrack_publicationDate:
        type: string
        format: date
      component_publicationDate:
        type: string
        format: date
      status:
        type: string
      parts:
        type: array
        items:
          $ref: "#/definitions/BibliographicEntry"
      partOf:
        type: string
        pattern: '^$|^[a-f\d]{24}$'
      cites:
        type: array
        items:
          type: string
          pattern: '^[a-f\d]{24}$'
      monograph_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      editedBook_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      bookSeries_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      bookSet_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      bookPart_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      bookTrack_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      component_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      dissertation_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      proceedingsArticle_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      proceedings_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      journal_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      journalVolume_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      journalIssue_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      journalArticle_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      dataset_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      report_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      reportSeries_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      book_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      referenceBook_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      referenceEntry_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      standard_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      standardSeries_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      source:
        type: string

  Identifier:
    required:
      - scheme
    properties:
      literalValue:
        type: string
      scheme:
        type: string
        
  AgentRole:
    required:
      - roleType
    properties:
      identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      roleType:
        type: string
      heldBy:
        $ref: "#/definitions/ResponsibleAgent"
        
  ResponsibleAgent:
    properties:
      identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      nameString:
        type: string
      givenName:
        type: string
      familyName:
        type: string
  
  ResourceEmbodiment:
    properties:
      type:
        type: string
      format:
        type: string
      firstPage:
        type: number
      lastPage:
        type: number
      url:
        type: string
      scans:
        type: array
        items:
          $ref: "#/definitions/Scan"

  BibliographicEntry:
    properties:
      _id:
        type: string
        pattern: '^[a-f\d]{24}$'
      identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bibliographicEntryText:
        type: string
      references:
        type: string
        pattern: '^[a-f\d]{24}$'
      scanId:
        type: string
        pattern: '^[a-f\d]{24}$'
      status:
        type: string
      ocrData:
        $ref: "#/definitions/OCRData"


  OCRData:
    properties:
      coordinates:
        type: string
      authors:
        type: array
        items:
          type: string
      title:
        type: string
      date:
        type: string
      marker:
        type: string
      comments:
        type: string
      journal:
        type: string
      volume:
        type: string
      namer:
        type: string
      detector:
        type: string

  ToDo:
    properties:
      _id:
        type: string
        pattern: '^[a-f\d]{24}$'
      journal_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      journalVolume_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      journalIssue_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      journalArticle_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      monograph_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      editedBook_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookSeries_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookSet_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookChapter_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookSection_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookPart_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      bookTrack_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      component_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      dissertation_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      proceedingsArticle_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      proceedings_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      dataset_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      report_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      reportSeries_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      book_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      referenceBook_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      referenceEntry_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      standard_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      standardSeries_identifiers:
        type: array
        items:
          $ref: "#/definitions/Identifier"
      type:
        type: string
      journal_title:
        type: string
      journalVolume_title:
        type: string
      journalIssue_title:
        type: string
      journalArticle_title:
        type: string
      monograph_title:
        type: string
      editedBook_title:
        type: string
      bookSeries_title:
        type: string
      bookSet_title:
        type: string
      bookChapter_title:
        type: string
      bookSection_title:
        type: string
      bookPart_title:
        type: string
      bookTrack_title:
        type: string
      component_title:
        type: string
      report_title:
        type: string
      proceedingsArticle_title:
        type: string
      proceedings_title:
        type: string
      dataset_title:
        type: string
      reportSeries_title:
        type: string
      book_title:
        type: string
      referenceBook_title:
        type: string
      referenceEntry_title:
        type: string
      standard_title:
        type: string
      standardSeries_title:
        type: string
      editedBook_subtitle:
        type: string
      report_subtitle:
        type: string
      dissertation_subtitle:
        type: string
      proceedingsArticle_subtitle:
        type: string
      standard_subtitle:
        type: string
      standardSeries_subtitle:
        type: string
      journal_subtitle:
        type: string
      journalArticle_subtitle:
        type: string
      bookSeries_subtitle:
        type: string
      monograph_subtitle:
        type: string
      bookSet_subtitle:
        type: string
      bookPart_subtitle:
        type: string
      bookChapter_subtitle:
        type: string
      bookSection_subtitle:
        type: string
      bookTrack_subtitle:
        type: string
      component_subtitle:
        type: string
      proceedings_subtitle:
        type: string
      dataset_subtitle:
        type: string
      reportSeries_subtitle:
        type: string
      book_subtitle:
        type: string
      referenceBook_subtitle:
        type: string
      referenceEntry_subtitle:
        type: string
      monograph_edition:
        type: string
      editedBook_edition:
        type: string
      dissertation_edition:
        type: string
      proceedings_edition:
        type: string
      report_edition:
        type: string
      book_edition:
        type: string
      referenceBook_edition:
        type: string
      standard_edition:
        type: string
      journalVolume_number:
        type: string
      journalIssue_number:
        type: string
      journalArticle_number:
        type: string
      bookPart_number:
        type: string
      monograph_number:
        type: string
      editedBook_number:
        type: string
      component_number:
        type: string
      bookSet_number:
        type: string
      bookChapter_number:
        type: string
      bookSection_number:
        type: string
      bookTrack_number:
        type: string
      proceedings_number:
        type: string
      report_number:
        type: string
      book_number:
        type: string
      standard_number:
        type: string
      referenceBook_number:
        type: string
      referenceEntry_number:
        type: string
      journal_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      report_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalVolume_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalIssue_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalArticle_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      monograph_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      editedBook_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookSeries_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      proceedingsArticle_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookSet_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookChapter_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      dataset_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      bookTrack_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      component_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      dissertation_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      proceedings_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      reportSeries_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      book_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      referenceBook_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      referenceEntry_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      standard_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      standardSeries_contributors:
        type: array
        items:
          $ref: "#/definitions/AgentRole"
      journalArticle_publicationDate:
        type: string
        format: date
      journalIssue_publicationDate:
        type: string
        format: date
      journalVolume_publicationDate:
        type: string
        format: date
      journal_publicationDate:
        type: string
        format: date
      monograph_publicationDate:
        type: string
        format: date
      report_publicationDate:
        type: string
        format: date
      reportSeries_publicationDate:
        type: string
        format: date
      bookChapter_publicationDate:
        type: string
        format: date
      bookSeries_publicationDate:
        type: string
        format: date
      bookSet_publicationDate:
        type: string
        format: date
      editedBook_publicationDate:
        type: string
        format: date
      dissertation_publicationDate:
        type: string
        format: date
      proceedingsArticle_publicationDate:
        type: string
        format: date
      dataset_publicationDate:
        type: string
        format: date
      proceedings_publicationDate:
        type: string
        format: date
      book_publicationDate:
        type: string
        format: date
      referenceBook_publicationDate:
        type: string
        format: date
      referenceEntry_publicationDate:
        type: string
        format: date
      standard_publicationDate:
        type: string
        format: date
      standardSeries_publicationDate:
        type: string
        format: date
      bookPart_publicationDate:
        type: string
        format: date
      bookSection_publicationDate:
        type: string
        format: date
      bookTrack_publicationDate:
        type: string
        format: date
      component_publicationDate:
        type: string
        format: date
      status:
        type: string
      parts:
        type: array
        items:
          $ref: "#/definitions/BibliographicEntry"
      partOf:
        type: string
        pattern: '^$|^[a-f\d]{24}$'
      cites:
        type: array
        items:
          type: string
          pattern: '^[a-f\d]{24}$'
      monograph_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      editedBook_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      bookSeries_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      bookSet_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      bookPart_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      bookTrack_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      component_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      dissertation_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      proceedingsArticle_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      proceedings_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      journal_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      journalVolume_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      journalIssue_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      journalArticle_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      dataset_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      report_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      reportSeries_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      book_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      referenceBook_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      referenceEntry_embodiedAs:
          type: array
          items:
            $ref: "#/definitions/ResourceEmbodiment"
      standard_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      standardSeries_embodiedAs:
        type: array
        items:
          $ref: "#/definitions/ResourceEmbodiment"
      children:
        type: array
        items:
          $ref: "#/definitions/BibliographicResource"

  Scan:
    required:
      - _id
    properties:
      _id:
        type: string
        pattern: '^[a-f\d]{24}$'
      scanName:
        type: string
      xmlName:
        type: string
      textualPdf:
        type: boolean
      status:
        type: string

  User:
    properties:
      username:
        type: string
      password:
        type: string
      feeds:
        type: array
        items:
          $ref: "#/definitions/Feed"

  Feed:
    properties:
      _id:
        type: string
        pattern: '^[a-f\d]{24}$'
      name:
        type: string
      url:
        type: string

  FeedEntry:
    description: |
      An entry returned by an RSS/ Atom/ RDF feed.
      A description of all the fields can be found here: https://www.npmjs.com/package/feedparser
    properties:
      title:
        type: string
      description:
        type: string
      summary:
        type: string
      link:
        type: string
      origlink:
        type: string
      permalink:
        type: string
      date:
        type: string
      pubdate:
        type: string
      author:
        type: string
      guid:
        type: string
      comments:
        type: string
      image:
        properties:
          url:
            type: string
          title:
            type: string
      categories:
        type: array
        items:
          type: string
      source:
        properties:
          url:
            type: string
          title:
            type: string
      enclosures:
        type: array
        items:
          properties:
            url:
              type: string
            type:
              type: string
            length:
              type: string
      meta:
        properties:
          title:
            type: string
          description:
            type: string
          link:
            type: string
          xmlurl:
            type: string
          date:
            type: string
          pubdate:
            type: string
          author:
            type: string
          language:
            type: string
          image:
            properties:
              url:
                type: string
              title:
                type: string
          favicon:
            type: string
          copyright:
            type: string
          generator:
            type: string
          categories:
            type: array
            items:
              type: string

  ErrorResponse:
    required:
      - message
    properties:
      message:
        type: string

  SuccessResponse:
    required:
      - message
    properties:
      message:
        type: string

  LogRequest:
    properties:
      logObject:
        type: object
